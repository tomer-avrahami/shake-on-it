from sw.key_generation.utils import str2array
import matplotlib.pyplot as plt
import numpy as np
if __name__ == "__main__":
    master_key_str = "111010101010101011100101010101101101010110000110010111001010011100001101111011110000110010101110001001011010000000001100000101100111110100110010001001010101110111001110001110001101010110010100010111010000010001100011010101110100011011110010000011101001111100111111000001011111111110111010000010101101111110101011011010111111011111000010110010100001110100101000110111111001001110011101001101011010000111110000010001010111101010100000000010011100001010101101001100010100010111110001111111010011011100110101010010100000000101100011011101000000101000111100011000000010100110100011000010100101100000000100000000000000000000000111010111000111111101100100111101100000110010100010110001011010011000000100100001010101101010110110111001001101110110010000100111111110011100100100100101010101111101111010110101011011111010001000011100111011110001011100101000000010000101000101111011010111010100010001101101010101011100000001110000000001110101101000001000001110010111010010011101110010100100010110110110110001101101011010111011111101000000001010111000010110100000000110101110111100111111001000011101111011110110111110111100001010101110011011100101101011000010111110000010101000001100001001101100001111001110001110"
    slave_key_str =  "111010101010101011100101010111011101110111000110110110001010011100001001011011110000110010101110001001011010000000001100000101100111110100110010001001010100110111001110101110101101010111010100011111110000110000100010110111110100011011010110000011101001101000101111000001011111111110000010000010101011110011101010011010011111011111000110110010100001110101111100111111011001001110010101011101011010000101110000010001010111111010100000000010011100001110101101001100010101010111101000111111010001011100110101010010100000000101100000111101000000101000111100111000000010100101100011000010100101100000010100000000000000000000000111111111010111111101100100111101100000110010100010100011011010011000000100110001110101101010110110111001001101110110010000100111111110001101100100000101010101101101111010110101011011111110001000011100011011110001011100101001000011000001000101111011010111010100000001101001010101010001000001110000000001110101101100001000001111010101010010010101110010100100010110110110110001101111011010101011111101000000001010101000010110100000000110101110111111111111000000011101111011110110111110101100001010101111001010110101101011000010111110000010101000001111001001101000001110001110111110"

    master_key = str2array(master_key_str)
    slave_key = str2array(slave_key_str)
    res = np.bitwise_xor(master_key,slave_key)
    # for i in range(len(master_key)):
    #     if master_key[i] != slave_key[i]:
    #         print(f"Flip bit at {i}")
    plt.plot(res,'+')
    plt.show()



